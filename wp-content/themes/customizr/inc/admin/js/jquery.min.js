!function(a,b){a[b]=function(b,c){this.$elem=a(b);var d=this;a.each(c,function(a,b){d[a]=b}),this.wrapCheckboxWithDivs(),this.attachEvents(),this.disableTextSelection(),this.resizeHandle&&this.optionallyResize("handle"),this.resizeContainer&&this.optionallyResize("container"),this.initialPosition()},a.extend(a[b].prototype,{wrapCheckboxWithDivs:function(){this.$elem.wrap('<div class="'+this.containerClass+'" />'),this.container=this.$elem.parent(),this.offLabel=a('<label class="'+this.labelOffClass+'"><span>'+this.uncheckedLabel+"</span></label>").appendTo(this.container),this.offSpan=this.offLabel.children("span"),this.onLabel=a('<label class="'+this.labelOnClass+'"><span>'+this.checkedLabel+"</span></label>").appendTo(this.container),this.onSpan=this.onLabel.children("span"),this.handle=a('<div class="'+this.handleClass+'"><div class="'+this.handleRightClass+'"><div class="'+this.handleCenterClass+'" /></div></div>').appendTo(this.container)},disableTextSelection:function(){a.browser.msie&&a.each([this.handle,this.offLabel,this.onLabel,this.container],function(b){a(b).attr("unselectable","on")})},optionallyResize:function(a){var b=this.onLabel.width(),c=this.offLabel.width();if("container"==a){var d=b>c?b:c;d+=this.handle.width()+15}else var d=c>b?b:c;this[a].css({width:d})},attachEvents:function(){var c=this;this.container.bind("mousedown touchstart",function(d){if(d.preventDefault(),!c.$elem.is(":disabled")){var e=d.pageX||d.originalEvent.changedTouches[0].pageX;a[b].currentlyClicking=c.handle,a[b].dragStartPosition=e,a[b].handleLeftOffset=parseInt(c.handle.css("left"),10)||0}}).bind("iPhoneDrag",function(d,e){if(d.preventDefault(),!c.$elem.is(":disabled")){var f=(e+a[b].handleLeftOffset-a[b].dragStartPosition)/c.rightSide;0>f&&(f=0),f>1&&(f=1),c.handle.css({left:f*c.rightSide}),c.onLabel.css({width:f*c.rightSide+4}),c.offSpan.css({marginRight:-f*c.rightSide}),c.onSpan.css({marginLeft:-(1-f)*c.rightSide})}}).bind("iPhoneDragEnd",function(d,e){if(!c.$elem.is(":disabled")){if(a[b].dragging){var f=(e-a[b].dragStartPosition)/c.rightSide;c.$elem.attr("checked",f>=.5)}else c.$elem.attr("checked",!c.$elem.attr("checked"));a[b].currentlyClicking=null,a[b].dragging=null,c.$elem.change()}}),this.$elem.change(function(){if(c.$elem.is(":disabled"))return c.container.addClass(c.disabledClass),!1;c.container.removeClass(c.disabledClass);var a=c.$elem.attr("checked")?c.rightSide:0;c.handle.animate({left:a},c.duration),c.onLabel.animate({width:a+4},c.duration),c.offSpan.animate({marginRight:-a},c.duration),c.onSpan.animate({marginLeft:a-c.rightSide},c.duration)})},initialPosition:function(){this.offLabel.css({width:this.container.width()-5});var b=a.browser.msie&&a.browser.version<7?3:6;this.rightSide=this.container.width()-this.handle.width()-b,this.$elem.is(":checked")?(this.handle.css({left:this.rightSide}),this.onLabel.css({width:this.rightSide+4}),this.offSpan.css({marginRight:-this.rightSide})):(this.onLabel.css({width:0}),this.onSpan.css({marginLeft:-this.rightSide})),this.$elem.is(":disabled")&&this.container.addClass(this.disabledClass)}}),a.fn[b]=function(c){var d=this.filter(":checkbox");if(!d.length)return this;var e=a.extend({},a[b].defaults,c);return d.each(function(){a(this).data(b,new a[b](this,e))}),a[b].initComplete||(a(document).bind("mousemove touchmove",function(c){if(a[b].currentlyClicking){c.preventDefault();var d=c.pageX||c.originalEvent.changedTouches[0].pageX;!a[b].dragging&&Math.abs(a[b].dragStartPosition-d)>e.dragThreshold&&(a[b].dragging=!0),a(c.target).trigger("iPhoneDrag",[d])}}).bind("mouseup touchend",function(c){if(a[b].currentlyClicking){c.preventDefault();var d=c.pageX||c.originalEvent.changedTouches[0].pageX;a(a[b].currentlyClicking).trigger("iPhoneDragEnd",[d])}}),a[b].initComplete=!0),this},a[b].defaults={duration:150,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:!0,resizeContainer:!0,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight",dragThreshold:5}}(jQuery,"iphoneStyle"),jQuery(function(){jQuery(".iphonecheck").iphoneStyle({checkedLabel:"Yes",uncheckedLabel:"No"})});